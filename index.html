<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SETI Institute - Search for Extraterrestrial Intelligence (Demo)</title>
    <link rel="icon" type="image/png" href="images/seti_logo_official.png">
    <link rel="shortcut icon" type="image/png" href="images/seti_logo_official.png">

    <style>
        :root {
            /* Light mode colors */
            --bg-color: #ffffff;
            --text-color: #333333;
            --header-bg: #000000;
            --header-text: #ffffff;
            --card-bg: #ffffff;
            --card-border: #dddddd;
            --section-bg: #f8fafc;
            --footer-bg: #f4f4f4;
            --footer-text: #000000;
            --accent-color: #3b82f6;
            --section-title-color: #1e293b;
            --card-text-color: #333333;
            --card-title-color: #1e293b;
            --research-card-text: #666666;
        }

        [data-theme="dark"] {
            /* Dark mode colors */
            --bg-color: #0f172a;
            --text-color: #e2e8f0;
            --header-bg: #1e293b;
            --header-text: #ffffff;
            --card-bg: #1e293b;
            --card-border: #334155;
            --section-bg: #1e293b;
            --footer-bg: #0f172a;
            --footer-text: #e2e8f0;
            --accent-color: #60a5fa;
            --section-title-color: #f1f5f9;
            --card-text-color: #cbd5e1;
            --card-title-color: #f1f5f9;
            --research-card-text: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding-top: 60px; /* Account for fixed demo banner */
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Demo Banner - Fixed at top */
        .demo-banner {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: white;
            padding: 12px 0;
            text-align: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .demo-banner .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .demo-banner .demo-icon {
            font-size: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .demo-banner .demo-text {
            font-size: 14px;
            font-weight: 500;
        }

        .demo-banner .demo-highlight {
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        /* Header */
        header {
            background: var(--header-bg);
            color: var(--header-text);
            padding: 1em 2em;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background-color 0.3s ease;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-container img {
            height: 50px;
            width: auto;
        }

        .logo-text {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--accent-color);
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        /* Dark Mode Toggle */
        .theme-toggle {
            background: var(--accent-color);
            border: none;
            padding: 8px 12px;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 10px rgba(59, 130, 246, 0.3);
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }

        nav ul li {
            margin-right: 1.5em;
        }

        nav ul li a {
            color: var(--header-text);
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        nav ul li a:hover {
            color: var(--accent-color);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(15, 23, 42, 0.7), rgba(30, 41, 59, 0.7)), url('images/pexels-pixabay-2150.jpg') center/cover no-repeat;
            color: #fff;
            height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .hero h1 {
            font-size: 3em;
            margin: 0;
            background: linear-gradient(135deg, #ffffff, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Main Content */
        main {
            padding: 2em;
        }

        section {
            margin-bottom: 3em;
        }

        section h2 {
            margin-top: 0;
            color: var(--section-title-color);
            font-size: 2rem;
            transition: color 0.3s ease;
        }

        /* Research Section with Background */
        #research {
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('images/pexels-pixabay-41951.jpg') center/cover no-repeat;
            color: white;
            padding: 3em 2em;
            border-radius: 8px;
            margin: 2em 0;
        }

        #research h2 {
            color: white;
            text-align: center;
            margin-bottom: 2em;
        }

        #research .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        #research .card h3 {
            color: #3b82f6;
        }

        #research .card p {
            color: var(--research-card-text);
        }

        #research .card p {
            color: white !important;
        }

        /* Grid Layout */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5em;
        }

        .card {
            border: 1px solid var(--card-border);
            padding: 1em;
            border-radius: 8px;
            background: var(--card-bg);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s ease, border-color 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .card h3 {
            color: var(--card-title-color);
            margin-bottom: 0.5em;
            transition: color 0.3s ease;
        }

        .card p {
            color: var(--card-text-color);
            transition: color 0.3s ease;
        }

        /* Footer */
        footer {
            background: var(--footer-bg);
            padding: 2em;
            text-align: center;
            transition: background-color 0.3s ease;
        }

        footer a {
            color: var(--footer-text);
            text-decoration: none;
            margin: 0 0.5em;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: var(--accent-color);
        }

        footer p {
            color: var(--footer-text);
            transition: color 0.3s ease;
        }

        /* Button Styling */
        .button {
            display: inline-block;
            background: var(--accent-color);
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        /* About Section Highlight */
        #about {
            background: var(--section-bg);
            padding: 2em;
            border-radius: 8px;
            margin: 2em 0;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2em;
            align-items: center;
            transition: background-color 0.3s ease;
        }

        .about-content {
            flex: 1;
        }

        .about-image {
            flex: 1;
            text-align: center;
        }

        .about-image img {
            width: 100%;
            max-width: 400px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        #about p {
            font-size: 1.1em;
            margin-bottom: 1em;
        }

        .ai-concierge-note {
            background: linear-gradient(135deg, #3b82f6, #1e3a8a);
            color: white;
            padding: 1em;
            border-radius: 8px;
            margin-top: 1em;
        }

        /* News Section with Featured Image */
        #news {
            position: relative;
        }

        .news-featured {
            background: linear-gradient(rgba(30, 41, 59, 0.9), rgba(30, 41, 59, 0.9)), url('images/pexels-pixabay-87009.jpg') center/cover no-repeat;
            color: white;
            padding: 2em;
            border-radius: 8px;
            margin-bottom: 2em;
            text-align: center;
        }

        .news-featured h3 {
            color: #3b82f6;
            font-size: 1.5em;
            margin-bottom: 1em;
        }
        @media (max-width: 768px) {
            .demo-banner .container {
                flex-direction: column;
                gap: 8px;
            }

            header {
                flex-direction: column;
                gap: 1em;
                text-align: center;
            }

            .header-controls {
                flex-direction: column;
                gap: 1em;
                width: 100%;
            }

            .logo-container {
                justify-content: center;
            }

            nav ul {
                flex-direction: column;
                gap: 10px;
                justify-content: center;
            }

            nav ul li {
                margin-right: 0;
            }

            .hero h1 {
                font-size: 2em;
            }

            main {
                padding: 1em;
            }

            #about {
                grid-template-columns: 1fr;
                gap: 1em;
            }

            .about-image {
                order: -1;
            }
        }

        /* Status notification */
        .status {
            position: fixed;
            top: 80px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 1002;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .status.success {
            background: rgba(34, 197, 94, 0.9);
        }

        .status.error {
            background: rgba(239, 68, 68, 0.9);
        }
    </style>
</head>
<body>
    <!-- Demo Banner - Fixed at top -->
    <div class="demo-banner">
        <div class="container">
            <div class="demo-icon">🤖</div>
            <div class="demo-text">
                This is a <span class="demo-highlight">DEMO</span> of the SETI Institute website featuring our new AI Concierge chatbot
            </div>
            <div class="demo-icon">💬</div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="logo-container">
            <img src="images/seti_logo_official.png" alt="SETI Institute Logo">
        </div>
        <div class="header-controls">
            <nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#programs">Programs</a></li>
                    <li><a href="#research">Research</a></li>
                    <li><a href="#news">News & Events</a></li>
                    <li><a href="#get-involved">Get Involved</a></li>
                </ul>
            </nav>
            <button class="theme-toggle" onclick="toggleTheme()">
                <span id="theme-icon">🌙</span>
                <span id="theme-text">Dark</span>
            </button>
        </div>
    </header>

    <!-- Hero Section -->
    <div class="hero">
        <h1>Search for Life Beyond Earth</h1>
    </div>

    <!-- Main Content -->
    <main>
        <section id="about">
            <div class="about-content">
                <h2>About SETI</h2>
                <p>The SETI Institute is a nonprofit organization dedicated to scientific research, education, and public outreach related to life in the universe.</p>
                <p>Founded in 1984, we explore the universe to understand the origin and nature of life and intelligence. Our mission encompasses the search for life beyond Earth, the study of how life began and evolved on our planet, and the role of life in the universe.</p>
                <div class="ai-concierge-note">
                    <strong>🤖 Try our new AI Concierge!</strong> Click the chat bubble in the bottom-right corner to ask questions about SETI, our research, upcoming events, or how to get involved.
                </div>
            </div>
            <div class="about-image">
                <img src="images/pexels-pixabay-355465.jpg" alt="Radio telescope array">
            </div>
        </section>

        <section id="programs">
            <h2>Programs</h2>
            <div class="grid">
                <div class="card">
                    <h3>Research & Development</h3>
                    <p>Innovative research in astronomy, biology, and technology to advance the search for extraterrestrial life.</p>
                </div>
                <div class="card">
                    <h3>Education & Outreach</h3>
                    <p>Programs and resources to engage students, educators, and the public in SETI science.</p>
                </div>
                <div class="card">
                    <h3>Observatory Operations</h3>
                    <p>Operate world-class observatories and instrumentation for radio and optical searches.</p>
                </div>
            </div>
        </section>

        <section id="research">
            <h2>Research Highlights</h2>
            <div class="grid">
                <div class="card">
                    <h3>🔭 Radio Astronomy</h3>
                    <p>Using advanced radio telescopes to scan the cosmos for artificial signals from extraterrestrial civilizations.</p>
                </div>
                <div class="card">
                    <h3>🌍 Exoplanet Research</h3>
                    <p>Studying distant worlds that could harbor life, analyzing their atmospheres and potential habitability.</p>
                </div>
                <div class="card">
                    <h3>🧬 Astrobiology</h3>
                    <p>Investigating the origins, evolution, and distribution of life in the universe through interdisciplinary science.</p>
                </div>
                <div class="card">
                    <h3>🤖 AI & Machine Learning</h3>
                    <p>Leveraging artificial intelligence to analyze vast datasets and identify potential signs of extraterrestrial technology.</p>
                </div>
                <div class="card">
                    <h3>🛰️ Breakthrough Listen</h3>
                    <p>The most comprehensive search for technosignatures to date, scanning millions of stars for signs of technology.</p>
                </div>
                <div class="card">
                    <h3>🔬 Laboratory Studies</h3>
                    <p>Conducting experiments to understand the conditions necessary for life and intelligence to emerge.</p>
                </div>
            </div>
        </section>

        <section id="news">
            <h2>Latest News</h2>
            <div class="news-featured">
                <h3>🌟 Breakthrough Discovery Alert</h3>
                <p>Stay connected with the latest developments in our search for extraterrestrial intelligence and cutting-edge research findings.</p>
            </div>
            <div class="grid">
                <div class="card">
                    <h3>🌟 New Exoplanet Discovery</h3>
                    <p>Scientists discover potentially habitable exoplanet in the Goldilocks zone of a nearby star system.</p>
                </div>
                <div class="card">
                    <h3>🔊 Radio Signal Analysis</h3>
                    <p>Advanced AI algorithms identify interesting patterns in radio telescope data from the Andromeda Galaxy.</p>
                </div>
                <div class="card">
                    <h3>🤖 AI Concierge Launch</h3>
                    <p>SETI Institute launches new AI-powered chatbot to help visitors learn about our research and get involved.</p>
                </div>
            </div>
        </section>

        <section id="get-involved">
            <h2>Get Involved</h2>
            <p>Support our mission through donations, membership, and volunteer opportunities. Help us continue the search for life beyond Earth.</p>
            <a href="#" class="button">Donate Now</a>
            <a href="#" class="button">Become a Member</a>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 SETI Institute | This is a demo website featuring the SETI Concierge AI chatbot</p>
        <p>
            <a href="#">Privacy Policy</a> |
            <a href="#">Contact Us</a> |
            <a href="#">Social Media</a> |
            <a href="#">Newsletter</a>
        </p>
    </footer>
    
    <div id="status" class="status" style="display: none;">
        Chat widget loading...
    </div>

    <!-- Simple Chat Widget -->
    <div id="chat-widget" class="chat-widget">
        <button id="chat-toggle" class="chat-toggle">
            <img src="images/Pulse_icon.png" alt="SETI Concierge" class="chat-icon">
        </button>
        <div id="chat-window" class="chat-window">
            <div class="chat-header">
                <span>🔭 SETI Concierge</span>
                <button id="chat-close" class="chat-close">&times;</button>
            </div>
            <div class="chat-messages" id="chat-messages">
                <div class="bot-message">
                    <div class="message-avatar">
                        <img src="images/Pulse_icon.png" alt="SETI">
                    </div>
                    <div class="message-content">
                        <p>👋 Welcome to the SETI Concierge!</p>
                        <p>I'm here to help you learn about SETI, our research, upcoming events, or how to get involved. What would you like to know?</p>
                    </div>
                </div>
                <!--<div class="starter-prompts" id="starter-prompts">
                    <button class="starter-prompt" data-message="What is SETI?">What is SETI?</button> 
                    <button class="starter-prompt" data-message="How can I get involved?">How can I get involved?</button>
                    <button class="starter-prompt" data-message="Tell me about upcoming events">Tell me about upcoming events</button>
                    <button class="starter-prompt" data-message="What research are you currently doing?">What research are you currently doing?</button> 
                </div>-->
            </div>
            <div class="chat-input-container">
                <input type="text" id="chat-input" placeholder="Ask me anything about SETI..." maxlength="500">
                <button id="chat-send">Send</button>
            </div>
        </div>
    </div>

    <style>
        /* Simple Chat Widget Styles */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chat-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--accent-color);
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
        }

        .chat-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
        }

        .chat-window {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 350px;
            height: 500px;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            transition: all 0.3s ease;
            display: none;
            flex-direction: column;
            pointer-events: auto;
        }

        .chat-window.show {
            display: flex;
        }

        .chat-window:hover {
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
        }

        .chat-header {
            background: var(--accent-color);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-close:hover {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: scroll !important;
            background: var(--bg-color);
            scrollbar-width: thin;
            scrollbar-color: var(--accent-color) transparent;
            overscroll-behavior: contain;
            height: 0; /* Forces flexbox to calculate proper height */
            min-height: 300px;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: var(--accent-color);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: #2563eb;
        }

        .bot-message, .user-message {
            display: flex;
            margin-bottom: 15px;
            align-items: flex-start;
            gap: 10px;
        }

        .user-message {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
            overflow: hidden;
        }

        .bot-message .message-avatar {
            background: var(--accent-color);
            color: white;
            padding: 2px;
        }

        .bot-message .message-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .user-message .message-avatar {
            background: #e2e8f0;
            color: #1a202c;
        }

        .message-content {
            background: var(--card-bg);
            padding: 10px 15px;
            border-radius: 12px;
            max-width: 80%;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .bot-message .message-content {
            background: #f8fafc;
            border: 1px solid var(--card-border);
        }

        [data-theme="dark"] .bot-message .message-content {
            background: #334155;
            border: 1px solid #475569;
        }

        .user-message .message-content {
            background: var(--accent-color);
            color: white;
        }

        .message-content p {
            margin: 0;
            line-height: 1.4;
            color: #1e293b;
        }

        [data-theme="dark"] .message-content p {
            color: #e2e8f0;
        }

        .user-message .message-content p {
            color: white;
        }

        .starter-prompts {
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            border-top: 1px solid var(--card-border);
            background: var(--section-bg);
            margin-top: 15px;
        }

        .starter-prompt {
            background: var(--card-bg);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            text-align: center;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .starter-prompt:hover {
            background: var(--accent-color);
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .starter-prompt:active {
            transform: translateY(0);
        }

        .chat-input-container {
            padding: 15px;
            border-top: 1px solid var(--card-border);
            display: flex;
            gap: 10px;
            background: var(--bg-color);
            flex-shrink: 0;
        }

        #chat-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid var(--card-border);
            border-radius: 20px;
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 14px;
            outline: none;
        }

        #chat-input:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }

        #chat-send {
            padding: 10px 20px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        #chat-send:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        #chat-send:disabled {
            background: #94a3b8;
            cursor: not-allowed;
            transform: none;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #64748b;
            font-style: italic;
            padding: 10px;
        }

        .typing-dots {
            display: flex;
            gap: 2px;
        }

        .typing-dot {
            width: 4px;
            height: 4px;
            background: #64748b;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }

        @media (max-width: 768px) {
            .chat-window {
                width: 90vw;
                height: 70vh;
                right: 5vw;
                bottom: 80px;
            }

            .starter-prompt {
                font-size: 13px;
                padding: 8px 12px;
            }
        }
    </style>

    <script>
        // Dark Mode Toggle Functionality
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');
            
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            body.setAttribute('data-theme', newTheme);
            
            // Update button text and icon
            if (newTheme === 'dark') {
                themeIcon.textContent = '☀️';
                themeText.textContent = 'Light';
            } else {
                themeIcon.textContent = '🌙';
                themeText.textContent = 'Dark';
            }
            
            // Save preference to localStorage
            localStorage.setItem('theme', newTheme);
        }

        // Load saved theme or default to light mode
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');
            
            body.setAttribute('data-theme', savedTheme);
            
            if (savedTheme === 'dark') {
                themeIcon.textContent = '☀️';
                themeText.textContent = 'Light';
            } else {
                themeIcon.textContent = '🌙';
                themeText.textContent = 'Dark';
            }
        }

        // Simple Chat Widget Functionality
        document.addEventListener('DOMContentLoaded', function() {
            loadTheme();
            
            const chatToggle = document.getElementById('chat-toggle');
            const chatWindow = document.getElementById('chat-window');
            const chatClose = document.getElementById('chat-close');
            const chatInput = document.getElementById('chat-input');
            const chatSend = document.getElementById('chat-send');
            const chatMessages = document.getElementById('chat-messages');
            const starterPrompts = document.getElementById('starter-prompts');
            const statusDiv = document.getElementById('status');

            let sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);

            function showStatus(message, type = 'info') {
                statusDiv.textContent = message;
                statusDiv.className = `status ${type}`;
                statusDiv.style.display = 'block';
                
                setTimeout(() => {
                    statusDiv.style.display = 'none';
                }, 3000);
            }

            function addMessage(content, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = isUser ? 'user-message' : 'bot-message';
                
                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                
                if (isUser) {
                    avatar.textContent = '👤';
                } else {
                    const img = document.createElement('img');
                    img.src = 'images/Pulse_icon.png';
                    img.alt = 'SETI';
                    avatar.appendChild(img);
                }
                
                const messageContent = document.createElement('div');
                messageContent.className = 'message-content';
                
                const messageText = document.createElement('p');
                messageText.textContent = content;
                messageContent.appendChild(messageText);
                
                messageDiv.appendChild(avatar);
                messageDiv.appendChild(messageContent);
                
                chatMessages.appendChild(messageDiv);
                // Ensure smooth scroll to bottom
                setTimeout(() => {
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 10);
            }

            function addTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.className = 'typing-indicator';
                typingDiv.id = 'typing-indicator';
                
                const typingText = document.createElement('span');
                typingText.textContent = 'SETI Concierge is typing';
                
                const dotsContainer = document.createElement('div');
                dotsContainer.className = 'typing-dots';
                
                for (let i = 0; i < 3; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'typing-dot';
                    dotsContainer.appendChild(dot);
                }
                
                typingDiv.appendChild(typingText);
                typingDiv.appendChild(dotsContainer);
                chatMessages.appendChild(typingDiv);
                setTimeout(() => {
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 10);
            }

            function removeTypingIndicator() {
                const typing = document.getElementById('typing-indicator');
                if (typing) {
                    typing.remove();
                }
            }

            function hideStarterPrompts() {
                if (starterPrompts) {
                    starterPrompts.style.display = 'none';
                }
            }

            async function sendMessage(message) {
                if (!message.trim()) return;
                
                // Hide starter prompts after first message
                hideStarterPrompts();
                
                // Add user message
                addMessage(message, true);
                
                // Clear input and disable send button
                chatInput.value = '';
                chatSend.disabled = true;
                
                // Show typing indicator
                addTypingIndicator();
                
                try {
                    const response = await fetch('https://n8n.srv847276.hstgr.cloud/webhook/5b4e2b85-a95c-43f6-b195-ceeede6eb376/chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            action: 'sendMessage',
                            sessionId: sessionId,
                            chatInput: message
                        })
                    });
                    
                    removeTypingIndicator();
                    
                    if (response.ok) {
                        const data = await response.json();
                        const botResponse = data.output || data.response || data.message || "I'm sorry, I couldn't process that request. Please try again.";
                        addMessage(botResponse);
                        showStatus('Message sent successfully!', 'success');
                    } else {
                        throw new Error('Network response was not ok');
                    }
                } catch (error) {
                    console.error('Chat error:', error);
                    removeTypingIndicator();
                    addMessage("I'm sorry, I'm having trouble connecting right now. Please try again later.");
                    showStatus('Connection error. Please try again.', 'error');
                } finally {
                    chatSend.disabled = false;
                }
            }

            // Event listeners
            chatToggle.addEventListener('click', function() {
                const isHidden = !chatWindow.classList.contains('show');
                if (isHidden) {
                    chatWindow.classList.add('show');
                    chatInput.focus();
                    // Scroll to bottom when opening
                    setTimeout(() => {
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 50);
                    showStatus('SETI Concierge chat opened!', 'success');
                } else {
                    chatWindow.classList.remove('show');
                }
            });

            chatClose.addEventListener('click', function() {
                chatWindow.classList.remove('show');
            });

            chatSend.addEventListener('click', function() {
                sendMessage(chatInput.value);
            });

            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage(chatInput.value);
                }
            });

            // Handle starter prompt clicks
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('starter-prompt')) {
                    const message = e.target.getAttribute('data-message');
                    sendMessage(message);
                }
            });

            // Close chat when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.chat-widget')) {
                    chatWindow.classList.remove('show');
                }
            });

            // Add scroll event handling for chat messages
            chatMessages.addEventListener('wheel', function(e) {
                // Allow scrolling within chat messages
                const isAtTop = chatMessages.scrollTop === 0;
                const isAtBottom = chatMessages.scrollTop >= chatMessages.scrollHeight - chatMessages.clientHeight;
                
                // Prevent page scroll only if we're scrolling within bounds
                if ((e.deltaY < 0 && !isAtTop) || (e.deltaY > 0 && !isAtBottom)) {
                    e.stopPropagation();
                }
            });

            showStatus('SETI Concierge chat ready!', 'success');
        });
    </script>
</body>
</html>
